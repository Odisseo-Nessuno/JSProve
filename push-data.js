var data= '{ "R23101": [{"S1": "MILANO BOVISA FNM"},{"P": "05:25:00"},{"S2": "PAVIA"},{"A": "06:21:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "0"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23100": [{"S1": "PAVIA"},{"P": "05:39:00"},{"S2": "MILANO BOVISA FNM"},{"A": "06:35:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "0"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23103": [{"S1": "MILANO BOVISA FNM"},{"P": "05:55:00"},{"S2": "PAVIA"},{"A": "06:51:00"},{"LED_PATH": "http://www.trenipendolari.it/images/yellow_on.png"},{"RIT": "1"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23102": [{"S1": "PAVIA"},{"P": "06:09:00"},{"S2": "MILANO BOVISA FNM"},{"A": "07:05:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "-3"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23105": [{"S1": "MILANO BOVISA FNM"},{"P": "06:25:00"},{"S2": "PAVIA"},{"A": "07:21:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "-1"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23104": [{"S1": "PAVIA"},{"P": "06:39:00"},{"S2": "MILANO BOVISA FNM"},{"A": "07:35:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "-4"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23107": [{"S1": "MILANO BOVISA FNM"},{"P": "06:55:00"},{"S2": "PAVIA"},{"A": "07:51:00"},{"LED_PATH": "http://www.trenipendolari.it/images/yellow_on.png"},{"RIT": "R2"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23106": [{"S1": "PAVIA"},{"P": "07:09:00"},{"S2": "MILANO BOVISA FNM"},{"A": "08:05:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "-1"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23109": [{"S1": "MILANO BOVISA FNM"},{"P": "07:25:00"},{"S2": "PAVIA"},{"A": "08:21:00"},{"LED_PATH": "http://www.trenipendolari.it/images/yellow_on.png"},{"RIT": "3"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23111": [{"S1": "GARBAGNATE MILANESE"},{"P": "07:38:00"},{"S2": "PAVIA"},{"A": "08:51:00"},{"LED_PATH": "http://www.trenipendolari.it/images/yellow_on.png"},{"RIT": "4"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23108": [{"S1": "PAVIA"},{"P": "07:39:00"},{"S2": "MILANO BOVISA FNM"},{"A": "08:35:00"},{"LED_PATH": "http://www.trenipendolari.it/images/yellow_on.png"},{"RIT": "1"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23115": [{"S1": "GARBAGNATE MILANESE"},{"P": "08:08:00"},{"S2": "PAVIA"},{"A": "09:21:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "0"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23110": [{"S1": "PAVIA"},{"P": "08:09:00"},{"S2": "MILANO BOVISA FNM"},{"A": "09:05:00"},{"LED_PATH": "http://www.trenipendolari.it/images/yellow_on.png"},{"RIT": "R2"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23112": [{"S1": "PAVIA"},{"P": "08:39:00"},{"S2": "MILANO BOVISA FNM"},{"A": "09:35:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "-2"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23119": [{"S1": "MILANO BOVISA FNM"},{"P": "08:55:00"},{"S2": "PAVIA"},{"A": "09:51:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "-2"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23114": [{"S1": "PAVIA"},{"P": "09:09:00"},{"S2": "MILANO BOVISA FNM"},{"A": "10:05:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "-1"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23121": [{"S1": "MILANO BOVISA FNM"},{"P": "09:25:00"},{"S2": "PAVIA"},{"A": "10:21:00"},{"LED_PATH": "http://www.trenipendolari.it/images/yellow_on.png"},{"RIT": "1"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23116": [{"S1": "PAVIA"},{"P": "09:39:00"},{"S2": "MILANO BOVISA FNM"},{"A": "10:35:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "-3"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23125": [{"S1": "MILANO BOVISA FNM"},{"P": "09:55:00"},{"S2": "PAVIA"},{"A": "10:51:00"},{"LED_PATH": "http://www.trenipendolari.it/images/yellow_on.png"},{"RIT": "R2"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23118": [{"S1": "PAVIA"},{"P": "10:09:00"},{"S2": "MILANO BOVISA FNM"},{"A": "11:05:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "-3"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23127": [{"S1": "MILANO BOVISA FNM"},{"P": "10:25:00"},{"S2": "PAVIA"},{"A": "11:21:00"},{"LED_PATH": "http://www.trenipendolari.it/images/yellow_flashing.gif"},{"RIT": "R2"},{"STATO": "3"},{"INFO": "Rilevato a CERTOSA DI PAVIA ore 11:14"}], "R23122": [{"S1": "PAVIA"},{"P": "10:39:00"},{"S2": "MILANO BOVISA FNM"},{"A": "11:35:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "-3"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23131": [{"S1": "MILANO BOVISA FNM"},{"P": "10:55:00"},{"S2": "PAVIA"},{"A": "11:51:00"},{"LED_PATH": "http://www.trenipendolari.it/images/yellow_on.png"},{"RIT": "3"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23124": [{"S1": "PAVIA"},{"P": "11:09:00"},{"S2": "MILANO BOVISA FNM"},{"A": "12:05:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "-1"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23133": [{"S1": "MILANO BOVISA FNM"},{"P": "11:25:00"},{"S2": "PAVIA"},{"A": "12:21:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "-1"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23128": [{"S1": "PAVIA"},{"P": "11:39:00"},{"S2": "MILANO BOVISA FNM"},{"A": "12:35:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "-4"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23135": [{"S1": "MILANO BOVISA FNM"},{"P": "11:55:00"},{"S2": "PAVIA"},{"A": "12:51:00"},{"LED_PATH": "http://www.trenipendolari.it/images/yellow_on.png"},{"RIT": "1"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23130": [{"S1": "PAVIA"},{"P": "12:09:00"},{"S2": "MILANO BOVISA FNM"},{"A": "13:05:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "-3"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23137": [{"S1": "MILANO BOVISA FNM"},{"P": "12:25:00"},{"S2": "PAVIA"},{"A": "13:21:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "0"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23132": [{"S1": "PAVIA"},{"P": "12:39:00"},{"S2": "MILANO BOVISA FNM"},{"A": "13:35:00"},{"LED_PATH": "http://www.trenipendolari.it/images/yellow_on.png"},{"RIT": "1"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23139": [{"S1": "MILANO BOVISA FNM"},{"P": "12:55:00"},{"S2": "PAVIA"},{"A": "13:51:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "0"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23134": [{"S1": "PAVIA"},{"P": "13:09:00"},{"S2": "MILANO BOVISA FNM"},{"A": "14:05:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "0"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23141": [{"S1": "MILANO BOVISA FNM"},{"P": "13:25:00"},{"S2": "PAVIA"},{"A": "14:21:00"},{"LED_PATH": "http://www.trenipendolari.it/images/yellow_on.png"},{"RIT": "4"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23136": [{"S1": "PAVIA"},{"P": "13:39:00"},{"S2": "MILANO BOVISA FNM"},{"A": "14:35:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "-3"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23143": [{"S1": "MILANO BOVISA FNM"},{"P": "13:55:00"},{"S2": "PAVIA"},{"A": "14:51:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "-1"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23138": [{"S1": "PAVIA"},{"P": "14:09:00"},{"S2": "MILANO BOVISA FNM"},{"A": "15:05:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "-2"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23145": [{"S1": "MILANO BOVISA FNM"},{"P": "14:25:00"},{"S2": "PAVIA"},{"A": "15:21:00"},{"LED_PATH": "http://www.trenipendolari.it/images/yellow_on.png"},{"RIT": "3"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23140": [{"S1": "PAVIA"},{"P": "14:39:00"},{"S2": "MILANO BOVISA FNM"},{"A": "15:35:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "-2"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23147": [{"S1": "MILANO BOVISA FNM"},{"P": "14:55:00"},{"S2": "PAVIA"},{"A": "15:51:00"},{"LED_PATH": "http://www.trenipendolari.it/images/yellow_on.png"},{"RIT": "3"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23142": [{"S1": "PAVIA"},{"P": "15:09:00"},{"S2": "MILANO BOVISA FNM"},{"A": "16:05:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "-1"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23149": [{"S1": "MILANO BOVISA FNM"},{"P": "15:25:00"},{"S2": "PAVIA"},{"A": "16:21:00"},{"LED_PATH": "http://www.trenipendolari.it/images/yellow_on.png"},{"RIT": "R2"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23144": [{"S1": "PAVIA"},{"P": "15:39:00"},{"S2": "MILANO BOVISA FNM"},{"A": "16:35:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "-2"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23151": [{"S1": "MILANO BOVISA FNM"},{"P": "15:55:00"},{"S2": "PAVIA"},{"A": "16:51:00"},{"LED_PATH": "http://www.trenipendolari.it/images/orange_flashing.gif"},{"RIT": "7"},{"STATO": "3"},{"INFO": "Rilevato a CERTOSA DI PAVIA ore 16:49"}], "R23146": [{"S1": "PAVIA"},{"P": "16:09:00"},{"S2": "MILANO BOVISA FNM"},{"A": "17:05:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "-4"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23153": [{"S1": "MILANO BOVISA FNM"},{"P": "16:25:00"},{"S2": "PAVIA"},{"A": "17:21:00"},{"LED_PATH": "http://www.trenipendolari.it/images/yellow_on.png"},{"RIT": "4"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23148": [{"S1": "PAVIA"},{"P": "16:39:00"},{"S2": "MILANO BOVISA FNM"},{"A": "17:35:00"},{"LED_PATH": "http://www.trenipendolari.it/images/orange_on.png"},{"RIT": "8"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23155": [{"S1": "MILANO BOVISA FNM"},{"P": "16:55:00"},{"S2": "PAVIA"},{"A": "17:51:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "0"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23150": [{"S1": "PAVIA"},{"P": "17:09:00"},{"S2": "MILANO BOVISA FNM"},{"A": "18:05:00"},{"LED_PATH": "http://www.trenipendolari.it/images/orange_on.png"},{"RIT": "11"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23157": [{"S1": "MILANO BOVISA FNM"},{"P": "17:25:00"},{"S2": "PAVIA"},{"A": "18:21:00"},{"LED_PATH": "http://www.trenipendolari.it/images/yellow_on.png"},{"RIT": "3"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23152": [{"S1": "PAVIA"},{"P": "17:39:00"},{"S2": "MILANO BOVISA FNM"},{"A": "18:35:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "-3"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23159": [{"S1": "MILANO BOVISA FNM"},{"P": "17:55:00"},{"S2": "PAVIA"},{"A": "18:51:00"},{"LED_PATH": "http://www.trenipendolari.it/images/yellow_on.png"},{"RIT": "5"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23154": [{"S1": "PAVIA"},{"P": "18:09:00"},{"S2": "MILANO BOVISA FNM"},{"A": "19:05:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "-3"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23161": [{"S1": "MILANO BOVISA FNM"},{"P": "18:25:00"},{"S2": "PAVIA"},{"A": "19:21:00"},{"LED_PATH": "http://www.trenipendolari.it/images/yellow_on.png"},{"RIT": "1"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23156": [{"S1": "PAVIA"},{"P": "18:39:00"},{"S2": "MILANO BOVISA FNM"},{"A": "19:35:00"},{"LED_PATH": "http://www.trenipendolari.it/images/yellow_flashing.gif"},{"RIT": "1"},{"STATO": "3"},{"INFO": "Rilevato a MILANO LANCETTI ore 19:29"}], "R23163": [{"S1": "MILANO BOVISA FNM"},{"P": "18:55:00"},{"S2": "PAVIA"},{"A": "19:51:00"},{"LED_PATH": "http://www.trenipendolari.it/images/yellow_on.png"},{"RIT": "5"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23158": [{"S1": "PAVIA"},{"P": "19:09:00"},{"S2": "MILANO BOVISA FNM"},{"A": "R20:05:00"},{"LED_PATH": "http://www.trenipendolari.it/images/yellow_on.png"},{"RIT": "R2"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23165": [{"S1": "MILANO BOVISA FNM"},{"P": "19:25:00"},{"S2": "PAVIA"},{"A": "R20:21:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "-1"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23160": [{"S1": "PAVIA"},{"P": "19:39:00"},{"S2": "MILANO BOVISA FNM"},{"A": "R20:35:00"},{"LED_PATH": "http://www.trenipendolari.it/images/orange_on.png"},{"RIT": "10"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23167": [{"S1": "MILANO BOVISA FNM"},{"P": "19:55:00"},{"S2": "PAVIA"},{"A": "R20:51:00"},{"LED_PATH": "http://www.trenipendolari.it/images/gray.png"},{"RIT": "0"},{"STATO": "0"},{"INFO": "Treno non ancora partito"}], "R23162": [{"S1": "PAVIA"},{"P": "R20:09:00"},{"S2": "MILANO BOVISA FNM"},{"A": "R21:05:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_on.png"},{"RIT": "-2"},{"STATO": "4"},{"INFO": "Treno giunto a destinazione"}], "R23169": [{"S1": "MILANO BOVISA FNM"},{"P": "R20:25:00"},{"S2": "PAVIA"},{"A": "R21:21:00"},{"LED_PATH": "http://www.trenipendolari.it/images/yellow_flashing.gif"},{"RIT": "3"},{"STATO": "3"},{"INFO": "Rilevato a CERTOSA DI PAVIA ore 21:15"}], "R23164": [{"S1": "PAVIA"},{"P": "R20:39:00"},{"S2": "MILANO BOVISA FNM"},{"A": "R21:35:00"},{"LED_PATH": "http://www.trenipendolari.it/images/green_flashing.gif"},{"RIT": "0"},{"STATO": "3"},{"INFO": "Rilevato a MILANO PORTA VITTORIA ore 21:15"}], "R23171": [{"S1": "MILANO BOVISA FNM"},{"P": "R20:55:00"},{"S2": "PAVIA"},{"A": "R21:51:00"},{"LED_PATH": "http://www.trenipendolari.it/images/yellow_flashing.gif"},{"RIT": "4"},{"STATO": "3"},{"INFO": "Rilevato a MILANO DATEO ore 21:15"}], "R23166": [{"S1": "PAVIA"},{"P": "R21:09:00"},{"S2": "MILANO BOVISA FNM"},{"A": "R22:05:00"},{"LED_PATH": "http://www.trenipendolari.it/images/gray.png"},{"RIT": "0"},{"STATO": "0"},{"INFO": "Treno non ancora partito"}], "R23173": [{"S1": "MILANO BOVISA FNM"},{"P": "R21:25:00"},{"S2": "PAVIA"},{"A": "R22:21:00"},{"LED_PATH": "http://www.trenipendolari.it/images/gray.png"},{"RIT": "0"},{"STATO": "0"},{"INFO": "Treno non ancora partito"}], "R23168": [{"S1": "PAVIA"},{"P": "R21:39:00"},{"S2": "MILANO BOVISA FNM"},{"A": "R22:35:00"},{"LED_PATH": "http://www.trenipendolari.it/images/gray.png"},{"RIT": "0"},{"STATO": "0"},{"INFO": "Treno non ancora partito"}], "R23175": [{"S1": "MILANO BOVISA FNM"},{"P": "R21:55:00"},{"S2": "PAVIA"},{"A": "R22:51:00"},{"LED_PATH": "http://www.trenipendolari.it/images/gray.png"},{"RIT": "0"},{"STATO": "0"},{"INFO": "Treno non ancora partito"}], "R23170": [{"S1": "PAVIA"},{"P": "R22:09:00"},{"S2": "MILANO BOVISA FNM"},{"A": "R23:05:00"},{"LED_PATH": "http://www.trenipendolari.it/images/gray.png"},{"RIT": "0"},{"STATO": "0"},{"INFO": "Treno non ancora partito"}], "R23177": [{"S1": "MILANO BOVISA FNM"},{"P": "R22:25:00"},{"S2": "PAVIA"},{"A": "R23:21:00"},{"LED_PATH": "http://www.trenipendolari.it/images/gray.png"},{"RIT": "0"},{"STATO": "0"},{"INFO": "Treno non ancora partito"}], "R23172": [{"S1": "PAVIA"},{"P": "R22:39:00"},{"S2": "MILANO BOVISA FNM"},{"A": "R23:35:00"},{"LED_PATH": "http://www.trenipendolari.it/images/gray.png"},{"RIT": "0"},{"STATO": "0"},{"INFO": "Treno non ancora partito"}], "R23174": [{"S1": "PAVIA"},{"P": "R23:09:00"},{"S2": "MILANO BOVISA FNM"},{"A": "00:05:00"},{"LED_PATH": "http://www.trenipendolari.it/images/gray.png"},{"RIT": "0"},{"STATO": "0"},{"INFO": "Treno non ancora partito"}], "R23179": [{"S1": "MILANO BOVISA FNM"},{"P": "R23:25:00"},{"S2": "PAVIA"},{"A": "00:21:00"},{"LED_PATH": "http://www.trenipendolari.it/images/gray.png"},{"RIT": "0"},{"STATO": "0"},{"INFO": "Treno non ancora partito"}] }'
var fieldList = ["S1","P","S2","A","LED_PATH","RIT","STATO","INFO"]
var allData=""
var allNewData=""

var actionNameOn = "onmouseover"
var actionNameOff = "onmouseleave"

var IhateApple

function fakeInvokeSSE(){
	document.getElementById("fakeServer").addEventListener("click",function(){
		allNewData=JSON.parse(data)
		if(allData==""){						
			allData=allNewData
			forceUpdate=true;
		}
		doStuff()
	})

}

function updateRow(trainNumber,force){
	if(getInternalData(trainNumber,"LED_PATH",allData)!=getInternalData(trainNumber,"LED_PATH",allNewData) || force){
		document.getElementById("LED_PATH"+trainNumber).innerHTML = '<img src="'+getInternalData(trainNumber,"LED_PATH",allNewData)+'" width="20" height="20" border="0"/>'
	}
	var stato = parseInt(getInternalData(trainNumber,"STATO",allNewData))
	var ritarto_toWrite=getInternalData(trainNumber,"RIT",allNewData)
	var rit = parseInt(ritarto_toWrite)
	if(rit<0){
		if(stato==0 || stato == 1 || stato==2)
			ritarto_toWrite="Non disponibile"
		else
			ritarto_toWrite="In anticipo"
	}	
	else if(rit==0){
		if(stato==0 || stato == 1 || stato==2)
			ritarto_toWrite="Non disponibile"
		else
			ritarto_toWrite="In orario"
	}

	document.getElementById("RIT"+trainNumber).innerHTML = ritarto_toWrite

	switch(stato){
		case 3:
			var html =  '<div '+actionNameOn+'=show("'+trainNumber+'",1) '+actionNameOff+'=hide("'+trainNumber+'",1) >Treno in viaggio - dettagli</div><div class=ttn id = tooltipTrainI'+trainNumber+'>'+getInternalData(trainNumber,"INFO",allNewData)+' </div> </td>'
			document.getElementById("INFO"+trainNumber).innerHTML=html
		break;
		case 1:
			var html =  '<div '+actionNameOn+'=show("'+trainNumber+'",1) '+actionNameOff+'=hide("'+trainNumber+'",1) >Treno cancellato - dettagli</div><div class=ttn id = tooltipTrainI'+trainNumber+'>'+getInternalData(trainNumber,"INFO",allNewData)+' </div> </td>'
			document.getElementById("INFO"+trainNumber).innerHTML=html		
		break;
		default:
			document.getElementById("INFO"+trainNumber).innerHTML= getInternalData(trainNumber,"INFO",allNewData)
	}
	
}

function compareAndUpdate(trainNumber){
	if(document.getElementById(trainNumber+"row")!=null){	
		updateRow(trainNumber,false)
	}
	else{
		makeRow(trainNumber)
		updateRow(trainNumber,true)
	}

}

function getInternalData(trainNumber,field,array){
	return array[trainNumber][fieldList.indexOf(field)][field]
}

function makeRow(trainNumber){
	var htmlTooltipText = allNewData[trainNumber][0]["S1"]+" "+ allNewData[trainNumber][1]["P"]+" - "+allNewData[trainNumber][2]["S2"]+" "+allNewData[trainNumber][3]["A"]
	var htmlTN =  '<td width="50" align="center" valign="middle"> <div '+actionNameOn+'=show("'+trainNumber+'",0) '+actionNameOff+'=hide("'+trainNumber+'",0) >'+trainNumber.substring(1)+'</div><div class=ttn id = tooltipTrain'+trainNumber+'>'+htmlTooltipText+' </div> </td>'
	var htmlLED = '<td width="20" align="center" nowrap="nowrap" id=LED_PATH'+trainNumber+'></td>'
	var htmlRIT = '<td width="80" align="center" valign="middle" id=RIT'+trainNumber+'></td>'
	var htmlINFO  ="<td id=INFO"+trainNumber+"></td>"
	var htmlTotalInjected=htmlTN+htmlLED+htmlRIT+htmlINFO;
	output = document.getElementById("output").innerHTML +="<tr bgcolor='E8EFFE' id="+trainNumber+"row>"+htmlTotalInjected+"</tr>"

}

function doStuff(){
    var trains = Object.keys(allNewData)
    for(var i=0; i<trains.length; i++){
        compareAndUpdate(trains[i])
        allData=allNewData
    }
}

function show(trainNumber,flgInfo){
	if(flgInfo==0)
		document.getElementById("tooltipTrain"+trainNumber).style.display="block"
		IhateApple="tooltipTrainI"+trainNumber
	else{
		document.getElementById("tooltipTrainI"+trainNumber).style.display="block"
		IhateApple="tooltipTrainI"+trainNumber
	}

}
function hide(trainNumber,flgInfo){
	if(flgInfo==0)
		document.getElementById("tooltipTrain"+trainNumber).style.display="none"
	else
		document.getElementById("tooltipTrainI"+trainNumber).style.display="none"
}

function setActionNameByDevice(){
	if(is_touch_device()){
		actionNameOn="onclick"
		document.body.addEventListener('mouseover',function(mEvent){
			if(IhateApple){
				document.getElementById(IhateApple).style.display="none"
			}
		},true);
	}


}

function is_touch_device() {  
  try {  
    document.createEvent("TouchEvent");  
    return true;  
  } catch (e) {  
    return false;  
  }  
}